<mat-progress-bar #progressBar *ngIf="progressValue!==0" [value]="progressValue"
                  mode="indeterminate"></mat-progress-bar>
<div class="row mb-3">
  <div class="col-8 border">

    <div class="row h-100">
      <div *ngIf="currentPlayer" class="col-4 font-weight-bold align-self-center">
        <h4 class="mb-2 mt-1">{{(getPlayerByRef(currentPlayer?.playerRef) | async)?.name}}</h4>
        <h2 class="my-1 mat-primary-color">{{gameDestinationCount - currentPlayerCount}}</h2>
        <h4 class="mb-1 mt-2">{{currentPlayerCount / getTrows(currentPlayer) * 3 | number:'0.0-1'}}</h4>
      </div>

      <div class="col-8">
        <div class="row mb-2 no-gutters">
          <div *ngIf="currentRound !== undefined" class="col text-center align-self-center">
            <h3>
              {{currentPlayer?.throws[currentRound * 3] !== undefined ? currentPlayer?.throws[currentRound * 3] : '-'}}
            </h3>
          </div>
          <div *ngIf="currentRound !== undefined" class="col text-center align-self-center">
            <h3>
              {{currentPlayer?.throws[currentRound * 3 + 1] !== undefined ? currentPlayer?.throws[currentRound * 3 + 1] : '-'}}
            </h3>
          </div>
          <div *ngIf="currentRound !== undefined" class="col text-center align-self-center">
            <h3>
              {{currentPlayer?.throws[currentRound * 3 + 2] !== undefined ? currentPlayer?.throws[currentRound * 3 + 2] : '-'}}
            </h3>
          </div>
        </div>
        <div class="row h-auto no-gutters">
          <div class="col">
            <img [src]="(getPlayerByRef(currentPlayer?.playerRef) | async)?.photoURL" alt=""
                 class="rounded-circle align-self-baseline float-right"
                 height="35" width="35" />
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-4">
    <cdk-virtual-scroll-viewport class="v-scroll-viewport" itemSize="50">
      <div *cdkVirtualFor="let player of players | async" class="row no-gutters p-1 border-bottom">
        <div class="col">{{(getPlayerByRef(player?.playerRef) | async)?.name}}
          <img [src]="(getPlayerByRef(player?.playerRef) | async)?.photoURL" alt="" class="rounded-circle align-self-baseline float-right"
               height="20" width="20" />
        </div>
        <div class="w-100"></div>
        <div class="col text-left">{{gameDestinationCount - getPlayerCount(player)}}</div>
        <div class="col text-right">{{getPlayerCount(player) / getTrows(player) * 3 | number:'0.0-1'}}</div>

      </div>
    </cdk-virtual-scroll-viewport>

  </div>
</div>
<div class="row mb-3">
  <div class="col text-center">
    <button (click)="double()" [color]="countDouble ? typeColor('warn') : undefined" class="mat-button-wide"
            mat-raised-button>Double
    </button>
  </div>
  <div class="col text-center">
    <button (click)="triple()" [color]="countTriple ? typeColor('warn') : undefined" class="mat-button-wide"
            mat-raised-button>Triple
    </button>
  </div>
</div>
<div *ngFor="let i of [].constructor(7) , let x = index" class="row mb-3">
  <div class="col text-center">
    <button (click)="hit(x * 3 + 1)" class="mat-button-wide" color="primary" mat-raised-button>{{x * 3 + 1}}</button>
  </div>
  <div class="col text-center">
    <button (click)="hit(x * 3 + 2)" class="mat-button-wide" color="primary" mat-raised-button>{{x * 3 + 2}}</button>
  </div>
  <div class="col text-center">
    <button (click)="hit(x * 3 + 3)" *ngIf="x<6; else bull" class="mat-button-wide" color="primary"
            mat-raised-button>{{x * 3 + 3}}</button>
    <ng-template #bull>
      <button (click)="hit(25)" [disabled]="countTriple" class="mat-button-wide" color="primary"
              mat-raised-button>{{countDouble ? 'Bullâ€™s Eye' : 'Bull'}}</button>
    </ng-template>
  </div>
</div>
<div class="row mb-3">
  <div class="col text-center">
    <button (click)="hit(0)" class="mat-button-wide" mat-raised-button>Ulf</button>
  </div>
  <div class="col text-center">
    <button (click)="undo()" class="mat-button-wide" mat-raised-button>Undo</button>
  </div>
</div>

